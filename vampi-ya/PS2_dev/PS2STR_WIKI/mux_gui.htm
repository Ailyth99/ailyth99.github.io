<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mux</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="wiki-nav">
        <a href="index.htm">Home</a> |
        <a href="ipu_convert_gui.htm">IPU Convert</a> |
        <a href="vag_encode_gui.htm">SPU Encode</a> |
        <a href="mux_gui.htm">Mux</a> |
        <a href="demux_gui.htm">Demux</a> |
        <a href="info_gui.htm">Info</a>
    </nav>

    <div class="wiki-content">
        <h1>Mux (ストリーム多重化)</h1>
        
        <h2>目的</h2>
        <p>各種データファイルを多重化し、pss ファイルを作成します。</p>
        
        <h2>メインウィンドウ</h2>
        <img src="image/mux.gif" alt="Mux Window" class="screenshot">
        
        <h3>入力ファイル (File List)</h3>
        <p>処理対象となる多重化指示ファイルのリストが表示されます。ファイルは、エクスプローラからのドラッグ＆ドロップか、[追加] ボタンでファイルを選択することで、リストに追加することができます。</p>

        <h3>ファイル操作</h3>
        <ul>
            <li><strong>新規登録 (Add New):</strong> 新しい多重化指示ファイルを作成し、ファイルリストに登録します。</li>
            <li><strong>編集 (Edit):</strong> 選択した多重化指示ファイルの内容を編集します。</li>
            <li><strong>追加 (Add):</strong> ファイルの選択ダイアログを表示し、入力ファイルのリストに追加するファイルを選びます。</li>
            <li><strong>削除 (Delete):</strong> 選択したファイルをファイルリストから削除します。</li>
            <li><strong>クリア (Clear):</strong> ファイルリストをクリアします。</li>
        </ul>

        <h2>多重化指示ファイル編集</h2>
        <div class="window-preview">
            <img src="image/mux_ind.gif" alt="多重化指示ファイル編集" class="screenshot">
        </div>

        <h3>最大パックサイズ (Maximum Pack Size)<br>最小パックサイズ (Minimum Pack Size)</h3>
        <p>パックサイズの最小、最大値を指定します。(Auto は、既定値 (Max, Min ともに、16,384 byte) を表します)</p>

        <h3>転送レート (Bit Rate)</h3>
        <p>全体の転送レートを指定します。(Auto は、自動設定を表します)</p>

        <h3>ストリーム (Stream)</h3>
        <p>多重化される各ストリームのリストを表示します。</p>

        <h3>追加 (Add)</h3>
        <p>ストリームリストに新たなストリームを追加します。</p>

        <h3>編集 (Edit)</h3>
        <p>選択したストリームを編集します。</p>

        <h3>削除 (Delete)</h3>
        <p>選択したストリームを削除します。</p>

        <h2>ストリーム設定</h2>
        <div class="window-preview">
            <img src="image/mux_stream.gif" alt="ストリーム設定" class="screenshot">
        </div>

        <h3>入力ファイル (Source File)</h3>
        <p>ストリームのデータファイルを指定します。</p>

        <h3>参照 (Browse)</h3>
        <p>ストリームデータファイルを選択するダイアログ (共通ダイアログ) を表示します。</p>

        <h3>ストリーム種別 (Stream)</h3>
        <p>ストリームの種類、番号を選択します。</p>

        <h3>最大パケットサイズ (Maximum Packet Size)<br>最小パケットサイズ (Minimum Packet Size)</h3>
        <p>PES パケットの最小、最大サイズを指定します。(Auto は、既定値 (Max: 4,096 byte, Min: 2,048 byte) を表します)</p>

        <h3>転送レート (Bit Rate)</h3>
        <p>ストリームの転送レートを指定します。(Auto は、自動設定を表します)</p>

        <h3>開始遅延 (Start Delay)</h3>
        <p>ストリームの開始遅延時間をミリ秒 (ms) 単位で設定します。</p>

        <h2>処理画面</h2>
        <img src="image/process.gif" alt="Process Window" class="screenshot">
        
        <h3>処理状況表示</h3>
        <ul>
            <li><strong>処理内容 (Caption):</strong> 処理の機能内容を表示します。</li>
            <li><strong>処理ファイル (File, Total Process):</strong> 現在処理中のファイル名と、ファイルリスト内の進行状況を表示します。</li>
            <li><strong>ファイルの処理状況 (Current Phase):</strong> 現在処理中のファイルの進行状況を表示します。</li>
            <li><strong>中止 (Cancel):</strong> 処理を強制終了します。</li>
        </ul>

        <h3>処理結果</h3>
        <img src="image/result.gif" alt="Result Window" class="screenshot">
        <p>処理終了後、処理結果のログを表示します。</p>
        
        <ul>
            <li><strong>保存 (Save):</strong> 処理結果テキストをファイルに保存します。</li>
            <li><strong>コピー (Copy):</strong> 処理結果テキストをクリップボードにコピーします。</li>
            <li><strong>閉じる (Close):</strong> ウィンドウを閉じます。</li>
        </ul>

        <h2>コマンドライン操作</h2>
        <p>GUI の他に、コマンドラインからも同様の機能を利用できます。</p>

        <h3>基本書式</h3>
        <div class="command-box">
            <code>mux [options] target_file [output_file]</code>
            <p>省略形: <code>m [options] target_file [output_file]</code></p>
        </div>

        <h3>オプション一覧</h3>
        <table class="command-table">
            <tr>
                <th>オプション</th>
                <th>説明</th>
            </tr>
            <tr>
                <td><code>-o</code></td>
                <td>出力ファイルが既に存在した場合、上書き出力します。</td>
            </tr>
            <tr>
                <td><code>-d [ディレクトリ]</code></td>
                <td>出力ディレクトリを指定します。</td>
            </tr>
            <tr>
                <td><code>-v</code></td>
                <td>作業の進行状況を詳しくレポートします。</td>
            </tr>
        </table>

        <h3>target file 部</h3>
        <table class="command-table">
            <tr>
                <td>パラメータ１</td>
                <td>多重化指示ファイル</td>
            </tr>
            <tr>
                <td>パラメータ２ (省略可能)</td>
                <td>作成される pss ファイル (省略されたときは、多重化指示ファイルの拡張子を、pss に変更したファイルが作成されます。)</td>
            </tr>
        </table>

        <h2>多重化指示ファイル</h2>
        <p>ファイルの多重化に関する情報を記述します。</p>

        <h3>基本形式</h3>
        <pre># comment
pss
    min_pack_size [最小パックサイズ]
    max_pack_size [最大パックサイズ]
    rate [転送レート]

    stream [ストリーム種別]:[ストリーム 番号]
        input [入力ファイル]

        min_packet_size [最小パケットサイズ]
        max_packet_size [最大パケットサイズ]
        rate [転送レート]

    end

    # stream の繰り返し...

end</pre>

        <p>'#' (シャープ記号) 以降の文字は、コメントとして行末まで無視されます。</p>
        <p>キーワードの大文字小文字は、区別されます。</p>
        <p>各キーワードは、行単位で処理されます。ひとつの行に、複数のキーワードを記述したり、複数の行に分割はできません。</p>
        <p>ブロック内での各行の順番は任意です。(input キーワードは、ブロックの最初に記述してください。)</p>

        <h3>キーワード説明</h3>
        <table class="command-table">
            <tr>
                <th>キーワード</th>
                <th>説明</th>
                <th>パラメータ</th>
                <th>デフォルト値</th>
            </tr>
            <tr>
                <td>pss</td>
                <td>プログラムストリームブロックの開始</td>
                <td>なし</td>
                <td>N/A</td>
            </tr>
            <tr>
                <td>end</td>
                <td>ブロックの終了</td>
                <td>なし</td>
                <td>N/A</td>
            </tr>
            <tr>
                <td>min_pack_size</td>
                <td>最小パックサイズ (省略可能)</td>
                <td>最小パックサイズ (byte)</td>
                <td>16384 (16KB)</td>
            </tr>
            <tr>
                <td>max_pack_size</td>
                <td>最大パックサイズ (省略可能)</td>
                <td>最大パックサイズ (byte)</td>
                <td>16384 (16KB)</td>
            </tr>
            <tr>
                <td>rate</td>
                <td>転送レート (プログラムストリーム、MPEG ビデオエレメンタリストリーム、オーディオエレメンタリストリームの転送レートは省略可能)</td>
                <td>転送レート (byte/sec)</td>
                <td>(自動計算)</td>
            </tr>
            <tr>
                <td>stream</td>
                <td>エレメンタリストリームブロックの開始</td>
                <td>ストリーム種別：ストリーム 番号</td>
                <td>ストリーム種別->必須<br>ストリーム ID -> 0</td>
            </tr>
            <tr>
                <td>input</td>
                <td>エレメンタリストリーム入力ファイル</td>
                <td>入力ファイル</td>
                <td>必須</td>
            </tr>
            <tr>
                <td>min_packet_size</td>
                <td>最小パケットサイズ (省略可能)</td>
                <td>最小パケットサイズ (byte)</td>
                <td>2048 (2KB)</td>
            </tr>
            <tr>
                <td>max_packet_size</td>
                <td>最大パケットサイズ (省略可能)</td>
                <td>最大パケットサイズ (byte)</td>
                <td>4096 (4KB)</td>
            </tr>
            <tr>
                <td>stream_start_delay</td>
                <td>ストリーム開始遅延時間 (省略可能)</td>
                <td>遅延時間 (ms)</td>
                <td>0 ms</td>
            </tr>
        </table>

        <h3>ストリーム種別</h3>
        <table class="command-table">
            <tr>
                <th>キーワード</th>
                <th>説明</th>
            </tr>
            <tr>
                <td>video</td>
                <td>MPEG ビデオ エレメンタリストリーム (*.m2v)</td>
            </tr>
            <tr>
                <td>ipu</td>
                <td>ipu 動画 エレメンタリストリーム (*.ipu)</td>
            </tr>
            <tr>
                <td>adpcm</td>
                <td>adpcm オーディオ エレメンタリストリーム (SPU ストリームファイル *.ads)</td>
            </tr>
            <tr>
                <td>pcm</td>
                <td>pcm オーディオ エレメンタリストリーム (SPU ストリームファイル *.ads)</td>
            </tr>
            <tr>
                <td>data</td>
                <td>任意データ エレメンタリストリーム (*.dat)</td>
            </tr>
        </table>

        <p>ストリーム 番号は、MPEG ビデオは、0 - 15 まで、その他のストリームは、0 - 65536 までの整数値で指定します。</p>

        <h3>使用例</h3>
        <div class="code-block">
            <h4>ipu 動画と、adpcm オーディオを多重化する</h4>
            <pre>pss
    stream ipu
        input video.ipu
        rate 256000 # 2000 kbit/s
    end

    stream adpcm
        input audio.ads
    end

end</pre>
        </div>

        <div class="code-block">
            <h4>MPEG ビデオと、PCM オーディオ x 2 を多重化する</h4>
            <pre>pss
    stream video:0
        input video.m2v
    end

    stream pcm:0
        input audio1.ads
    end

    stream pcm:1
        input audio2.ads
    end

end</pre>
        </div>

        <div class="wiki-footer">
            <p>最終更新日：2024/03/21</p>
            <address>
                SCE CONFIDENTIAL
                <br>Copyright (c) 2000 Sony Computer Entertainment Inc. All Rights Reserved.</br>
            </address>
        </div>
    </div>
</body>
</html> 